var ce=Object.defineProperty;var de=(e,u,a)=>u in e?ce(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a;var te=(e,u,a)=>de(e,typeof u!="symbol"?u+"":u,a);import{d as Ae,r as R,l as fe,a as pe,R as ve,m as be,n as xe,o as b,p as he,c as x,f as L,e as r,u as B,i as ye,t as c,h as _e,w as Q,q as ne,v as X,F as N,x as q,y as V,T as we,j as z,b as J,_ as ke,k as Ee}from"./AuthState-gwzX-Ifq.js";const Pe=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Ce=new Map(Pe);class re extends Error{constructor(a){super(re._prepareSuperMessage(a));te(this,"name","NonError")}static _prepareSuperMessage(a){try{return JSON.stringify(a)}catch{return String(a)}}}const Me=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ee=new WeakSet,Se=e=>{ee.add(e);const u=e.toJSON();return ee.delete(e),u},me=e=>Ce.get(e)??Error,se=({from:e,seen:u,to:a,forceEnumerable:A,maxDepth:E,depth:C,useToJSON:l,serialize:p})=>{if(!a)if(Array.isArray(e))a=[];else if(!p&&ae(e)){const g=me(e.name);a=new g}else a={};if(u.push(e),C>=E)return a;if(l&&typeof e.toJSON=="function"&&!ee.has(e))return Se(e);const d=g=>se({from:g,seen:[...u],forceEnumerable:A,maxDepth:E,depth:C,useToJSON:l,serialize:p});for(const[g,v]of Object.entries(e)){if(v&&v instanceof Uint8Array&&v.constructor.name==="Buffer"){a[g]="[object Buffer]";continue}if(v!==null&&typeof v=="object"&&typeof v.pipe=="function"){a[g]="[object Stream]";continue}if(typeof v!="function"){if(!v||typeof v!="object"){try{a[g]=v}catch{}continue}if(!u.includes(e[g])){C++,a[g]=d(e[g]);continue}a[g]="[Circular]"}}for(const{property:g,enumerable:v}of Me)typeof e[g]<"u"&&e[g]!==null&&Object.defineProperty(a,g,{value:ae(e[g])?d(e[g]):e[g],enumerable:A?!0:v,configurable:!0,writable:!0});return a};function Te(e,u={}){const{maxDepth:a=Number.POSITIVE_INFINITY,useToJSON:A=!0}=u;return typeof e=="object"&&e!==null?se({from:e,seen:[],forceEnumerable:!0,maxDepth:a,depth:0,useToJSON:A,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Oe(e,u={}){const{maxDepth:a=Number.POSITIVE_INFINITY}=u;if(e instanceof Error)return e;if(Ie(e)){const A=me(e.name);return se({from:e,seen:[],to:new A,maxDepth:a,depth:0,serialize:!1})}return new re(e)}function ae(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Ie(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Re=Object.defineProperty,je=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,oe=(e,u,a)=>u in e?Re(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a,ie=(e,u)=>{for(var a in u||(u={}))$e.call(u,a)&&oe(e,a,u[a]);if(le)for(var a of le(u))Le.call(u,a)&&oe(e,a,u[a]);return e},ue=(e,u)=>je(e,Ne(u)),Fe=(e,u,a)=>new Promise((A,E)=>{var C=d=>{try{p(a.next(d))}catch(g){E(g)}},l=d=>{try{p(a.throw(d))}catch(g){E(g)}},p=d=>d.done?A(d.value):Promise.resolve(d.value).then(C,l);p((a=a.apply(e,u)).next())});function Be(e){let u,a={};function A(){Object.entries(a).length===0&&(u==null||u(),u=void 0)}let E=Math.floor(Math.random()*1e4);function C(){return E++}return{sendMessage(l,p,...d){return Fe(this,null,function*(){var g,v,y,S;const I={id:C(),type:l,data:p,timestamp:Date.now()},T=(v=yield(g=e.verifyMessageData)==null?void 0:g.call(e,I))!=null?v:I;(y=e.logger)==null||y.debug(`[messaging] sendMessage {id=${T.id}} ─ᐅ`,T,...d);const O=yield e.sendMessage(T,...d),{res:h,err:w}=O??{err:new Error("No response")};if((S=e.logger)==null||S.debug(`[messaging] sendMessage {id=${T.id}} ᐊ─`,{res:h,err:w}),w!=null)throw Oe(w);return h})},onMessage(l,p){var d,g,v;if(u==null&&((d=e.logger)==null||d.debug(`[messaging] "${l}" initialized the message listener for this context`),u=e.addRootListener(y=>{var S,I;if(typeof y.type!="string"||typeof y.timestamp!="number"){if(e.breakError)return;const h=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(y)}`);throw(S=e.logger)==null||S.error(h),h}(I=e==null?void 0:e.logger)==null||I.debug("[messaging] Received message",y);const T=a[y.type];if(T==null)return;const O=T(y);return Promise.resolve(O).then(h=>{var w,$;return($=(w=e.verifyMessageData)==null?void 0:w.call(e,h))!=null?$:h}).then(h=>{var w;return(w=e==null?void 0:e.logger)==null||w.debug(`[messaging] onMessage {id=${y.id}} ─ᐅ`,{res:h}),{res:h}}).catch(h=>{var w;return(w=e==null?void 0:e.logger)==null||w.debug(`[messaging] onMessage {id=${y.id}} ─ᐅ`,{err:h}),{err:Te(h)}})})),a[l]!=null){const y=Error(`[messaging] In this JS context, only one listener can be setup for ${l}`);throw(g=e.logger)==null||g.error(y),y}return a[l]=p,(v=e.logger)==null||v.log(`[messaging] Added listener for ${l}`),()=>{delete a[l],A()}},removeAllListeners(){Object.keys(a).forEach(l=>{delete a[l]}),A()}}}function De(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G={exports:{}},Ue=G.exports,ge;function qe(){return ge||(ge=1,function(e,u){(function(a,A){A(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ue,function(a){var A,E;if(!((E=(A=globalThis.chrome)==null?void 0:A.runtime)!=null&&E.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const C="The message port closed before a response was received.",l=p=>{const d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(i,m=void 0){super(m),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const v=o=>o&&typeof o=="object"&&typeof o.then=="function",y=(o,i)=>(...m)=>{p.runtime.lastError?o.reject(new Error(p.runtime.lastError.message)):i.singleCallbackArg||m.length<=1&&i.singleCallbackArg!==!1?o.resolve(m[0]):o.resolve(m)},S=o=>o==1?"argument":"arguments",I=(o,i)=>function(f,..._){if(_.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${S(i.minArgs)} for ${o}(), got ${_.length}`);if(_.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${S(i.maxArgs)} for ${o}(), got ${_.length}`);return new Promise((P,M)=>{if(i.fallbackToNoCallback)try{f[o](..._,y({resolve:P,reject:M},i))}catch(t){console.warn(`${o} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,t),f[o](..._),i.fallbackToNoCallback=!1,i.noCallback=!0,P()}else i.noCallback?(f[o](..._),P()):f[o](..._,y({resolve:P,reject:M},i))})},T=(o,i,m)=>new Proxy(i,{apply(f,_,P){return m.call(_,o,...P)}});let O=Function.call.bind(Object.prototype.hasOwnProperty);const h=(o,i={},m={})=>{let f=Object.create(null),_={has(M,t){return t in o||t in f},get(M,t,n){if(t in f)return f[t];if(!(t in o))return;let s=o[t];if(typeof s=="function")if(typeof i[t]=="function")s=T(o,o[t],i[t]);else if(O(m,t)){let k=I(t,m[t]);s=T(o,o[t],k)}else s=s.bind(o);else if(typeof s=="object"&&s!==null&&(O(i,t)||O(m,t)))s=h(s,i[t],m[t]);else if(O(m,"*"))s=h(s,i[t],m["*"]);else return Object.defineProperty(f,t,{configurable:!0,enumerable:!0,get(){return o[t]},set(k){o[t]=k}}),s;return f[t]=s,s},set(M,t,n,s){return t in f?f[t]=n:o[t]=n,!0},defineProperty(M,t,n){return Reflect.defineProperty(f,t,n)},deleteProperty(M,t){return Reflect.deleteProperty(f,t)}},P=Object.create(o);return new Proxy(P,_)},w=o=>({addListener(i,m,...f){i.addListener(o.get(m),...f)},hasListener(i,m){return i.hasListener(o.get(m))},removeListener(i,m){i.removeListener(o.get(m))}}),$=new g(o=>typeof o!="function"?o:function(m){const f=h(m,{},{getContent:{minArgs:0,maxArgs:0}});o(f)}),F=new g(o=>typeof o!="function"?o:function(m,f,_){let P=!1,M,t=new Promise(U=>{M=function(j){P=!0,U(j)}}),n;try{n=o(m,f,M)}catch(U){n=Promise.reject(U)}const s=n!==!0&&v(n);if(n!==!0&&!s&&!P)return!1;const k=U=>{U.then(j=>{_(j)},j=>{let K;j&&(j instanceof Error||typeof j.message=="string")?K=j.message:K="An unexpected error occurred",_({__mozWebExtensionPolyfillReject__:!0,message:K})}).catch(j=>{console.error("Failed to send onMessage rejected reply",j)})};return k(s?n:t),!0}),H=({reject:o,resolve:i},m)=>{p.runtime.lastError?p.runtime.lastError.message===C?i():o(new Error(p.runtime.lastError.message)):m&&m.__mozWebExtensionPolyfillReject__?o(new Error(m.message)):i(m)},W=(o,i,m,...f)=>{if(f.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${S(i.minArgs)} for ${o}(), got ${f.length}`);if(f.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${S(i.maxArgs)} for ${o}(), got ${f.length}`);return new Promise((_,P)=>{const M=H.bind(null,{resolve:_,reject:P});f.push(M),m.sendMessage(...f)})},Y={devtools:{network:{onRequestFinished:w($)}},runtime:{onMessage:w(F),onMessageExternal:w(F),sendMessage:W.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:W.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},D={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":D},services:{"*":D},websites:{"*":D}},h(p,Y,d)};a.exports=l(chrome)}else a.exports=globalThis.browser})}(G)),G.exports}var We=qe();const Z=De(We);function Ve(e){return Be(ue(ie({},e),{sendMessage(u,a){if(a==null)return Z.runtime.sendMessage(u);const A=typeof a=="number"?{tabId:a}:a;return Z.tabs.sendMessage(A.tabId,u,A.frameId!=null?{frameId:A.frameId}:void 0)},addRootListener(u){const a=(A,E)=>u(typeof A=="object"?ue(ie({},A),{sender:E}):A);return Z.runtime.onMessage.addListener(a),()=>Z.runtime.onMessage.removeListener(a)}}))}const{onMessage:ze}=Ve(),Je={key:0,class:"floating-panel"},Ze={class:"panel-header"},Ge={key:0,style:{"font-size":"12px",color:"#666",margin:"0"}},He={class:"panel-content"},Ye={class:"input-section"},Ke={class:"parse-button-container"},Qe=["disabled"],Xe={class:"input-group contact-group"},er={class:"contact-inputs"},rr=["disabled"],sr=["disabled"],tr=["disabled"],nr={class:"input-group feedback-group"},ar={class:"input-wrapper"},lr=["disabled"],or=["disabled"],ir={class:"feedback-prompts"},ur={key:0,class:"contact-info-section"},gr={class:"info-card"},mr={class:"info-grid"},cr={class:"info-item"},dr={class:"info-value"},Ar={class:"info-item"},fr={class:"info-value"},pr={class:"info-item"},vr={class:"info-value"},br={class:"result-section"},xr={class:"panel-header2"},hr={key:0,class:"warning-box"},yr={key:0,class:"result-content"},_r={key:0,class:"info-card"},wr={class:"info-grid"},kr={class:"info-label"},Er={class:"info-value"},Pr={key:1,class:"data-table"},Cr={key:2,class:"data-table"},Mr={key:3,class:"data-table"},Sr={key:1,class:"empty-result"},Tr=Ae({__name:"FloatingPanel",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:u}){const a=u,A=R(""),E=R(!1),C=R(!1),l=R(""),p=R(""),d=R(""),g=R(""),v=R(!1),y=R(!1),S=R(""),I=R(""),T=t=>/^[+]?[\s-\d]+$/.test(t),O=t=>/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(t),h=fe(()=>!(!A.value||!d.value&&!g.value||d.value&&!T(d.value)||g.value&&!O(g.value)));ze("updateResumeId",t=>(A.value=t.data.resumeId,t.data.resumeId));const w=async()=>{if(h.value)try{v.value=!0,await z.updateMobileEmail(S.value,d.value,g.value),alert("更新成功"),typeof l.value!="string"&&l.value.userinfo&&l.value.userinfo.length>0&&(l.value.userinfo[0].email=g.value,l.value.userinfo[0].mobile=d.value),g.value="",d.value=""}catch(t){alert(`更新失败: ${t.message}`)}finally{v.value=!1}};let $;const F=async()=>{const[t]=await J.tabs.query({active:!0,currentWindow:!0});if(!(t!=null&&t.id))throw new Error("无法获取当前活动标签页");return new Promise((n,s)=>{J.tabs.sendMessage(t.id,{action:"getPageData"},k=>{if(J.runtime.lastError){s(new Error(J.runtime.lastError.message));return}if(!k){s(new Error("未收到页面数据"));return}n(k)})})},H=async()=>{var t;try{const{html:n,url:s}=await F(),k=await z.getSourceId(s,n);return((t=k==null?void 0:k.data)==null?void 0:t.source_id)??null}catch(n){return console.error("Failed to fetch current source_id:",n),null}},W=async()=>I.value?await H()===I.value:!1,Y=async()=>{if(A.value)try{E.value=!0,d.value="",g.value="",p.value="";const{html:t,url:n}=await F();if(!t||!n)throw new Error("页面数据不完整");const s=await z.parseResume(A.value,n,t);if(l.value=s.data,y.value=!!s.has_contact,typeof l.value!="string"&&l.value.userinfo&&l.value.userinfo.length>0){const k=l.value.userinfo[0];S.value=k.source_id||"",I.value=k.source_id||""}}catch(t){const n=t instanceof Error?t.message:"未知错误";l.value=`解析出错: ${n}`}finally{E.value=!1}},D=t=>async()=>{if(!await W()){alert("⚠️ 请先解析当前简历后再更新联系方式");return}await t()},o=async()=>{if(!(!p.value||p.value.length>255))try{C.value=!0;const{html:t,url:n}=await F(),s=S.value;await z.submitFeedback(s,p.value,t),p.value="",alert("反馈提交成功")}catch(t){alert(`提交失败: ${t.message}`)}finally{C.value=!1}},i=t=>{p.value=t};pe(async()=>{if($=ve.getInstance(),A.value="test-id",!$.checkSupportedDomain(window.location.hostname)){a("update:visible",!1);return}$.subscribe(t=>{A.value=t})}),be(()=>{});const m=t=>({9:"小学",8:"初中",3:"高中",4:"中技/中专/技校/职高",5:"大专",1:"本科",2:"硕士/硕士研究生",6:"MBA",7:"博士/博士研究生",10:"保密",120:"EMBA",130:"MPA"})[t]||"未知",f={1:"在职-不找工作",2:"离职-找工作",3:"在职-看机会",4:"在校-找工作",5:"在校-不找工作",6:"观望有好机会会考虑",7:"积极找工作",[-1]:"未知"},_=t=>f[t]||"未知",P=D(w),M=o;return(t,n)=>(b(),xe(we,{name:"fade"},{default:he(()=>[t.visible?(b(),x("div",Je,[r("div",Ze,[n[8]||(n[8]=r("h3",null,"功能面板",-1)),B(ye)?(b(),x("p",Ge,"👤 "+c(B(_e)),1)):L("",!0)]),r("div",He,[r("div",Ye,[r("div",Ke,[r("button",{class:"full-parse-button",onClick:Y,disabled:E.value},c(E.value?"解析中...":"解析"),9,Qe)]),r("div",Xe,[n[9]||(n[9]=r("label",null,"联系方式：",-1)),r("div",er,[Q(r("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>d.value=s),placeholder:"手机号",class:ne({invalid:d.value&&!T(d.value)}),disabled:v.value},null,10,rr),[[X,d.value]]),Q(r("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=s=>g.value=s),placeholder:"邮箱地址",class:ne({invalid:g.value&&!O(g.value)}),disabled:v.value},null,10,sr),[[X,g.value]])]),r("button",{onClick:n[2]||(n[2]=(...s)=>B(P)&&B(P)(...s)),disabled:!h.value||v.value,class:"update-button"},c(v.value?"更新中...":"更新"),9,tr)]),r("div",nr,[n[10]||(n[10]=r("label",null,"反馈意见：",-1)),r("div",ar,[Q(r("textarea",{"onUpdate:modelValue":n[3]||(n[3]=s=>p.value=s),placeholder:"请输入反馈意见",disabled:C.value,class:"feedback-textarea"},null,8,lr),[[X,p.value]]),r("button",{onClick:n[4]||(n[4]=(...s)=>B(M)&&B(M)(...s)),disabled:!p.value||C.value},c(C.value?"提交中...":"反馈"),9,or)]),r("div",ir,[r("button",{onClick:n[5]||(n[5]=s=>i("无法解析当前简历"))},"无解析结果"),r("button",{onClick:n[6]||(n[6]=s=>i("解析基本信息错误"))},"用户信息错误"),r("button",{onClick:n[7]||(n[7]=s=>i("解析工作经历错误"))},"工作经历错误")])])]),l.value&&typeof l.value!="string"&&l.value.userinfo&&l.value.userinfo.length?(b(),x("div",ur,[n[14]||(n[14]=r("h3",{class:"panel-title"},"联系方式:",-1)),r("div",gr,[r("div",mr,[r("div",cr,[n[11]||(n[11]=r("span",{class:"info-label"},"👤:",-1)),r("span",dr,c(l.value.userinfo[0].name||"未解析?"),1)]),r("div",Ar,[n[12]||(n[12]=r("span",{class:"info-label"},"📞:",-1)),r("span",fr,c(l.value.userinfo[0].mobile||""),1)]),r("div",pr,[n[13]||(n[13]=r("span",{class:"info-label"},"📧:",-1)),r("span",vr,c(l.value.userinfo[0].email||""),1)])])])])):L("",!0),r("div",br,[r("div",xr,[y.value?(b(),x("div",hr," ⚠️ 系统中有人已购买该简历! ")):L("",!0),n[15]||(n[15]=r("h3",{class:"panel-title"},"结果面板",-1))]),l.value?(b(),x("div",yr,[typeof l.value=="string"?(b(),x(N,{key:0},[q(c(l.value),1)],64)):(b(),x(N,{key:1},[l.value.userinfo&&l.value.userinfo.length?(b(),x("div",_r,[n[16]||(n[16]=r("h5",null,"基本信息",-1)),r("div",wr,[(b(),x(N,null,V(["source_id","name","gender","first_education_level","years_of_work","area","status","age","last_updated_time","birthyear","web_site"],(s,k)=>r("div",{key:k,class:"info-item"},[r("span",kr,c(s)+":",1),r("span",Er,[s==="gender"?(b(),x(N,{key:0},[q(c(l.value.userinfo[0][s]===0?"男":l.value.userinfo[0][s]===1?"女":"未知"),1)],64)):s==="first_education_level"?(b(),x(N,{key:1},[q(c(m(l.value.userinfo[0][s]??-1)),1)],64)):s==="status"?(b(),x(N,{key:2},[q(c(_(l.value.userinfo[0][s]??-1)),1)],64)):(b(),x(N,{key:3},[q(c(l.value.userinfo[0][s]||""),1)],64))])])),64))])])):L("",!0),l.value.workinfo&&l.value.workinfo.length?(b(),x("div",Pr,[n[18]||(n[18]=r("h5",null,"工作经历",-1)),r("table",null,[n[17]||(n[17]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"公司"),r("th",null,"职位"),r("th",null,"部门"),r("th",null,"性质"),r("th",null,"描述")])],-1)),r("tbody",null,[(b(!0),x(N,null,V(l.value.workinfo,s=>(b(),x("tr",{key:s.company_name+s.start_date},[r("td",null,c(s.start_date)+" - "+c(s.end_date),1),r("td",null,c(s.company_name),1),r("td",null,c(s.job_title),1),r("td",null,c(s.department),1),r("td",null,c(s.job_property),1),r("td",null,c(s.jobduty),1)]))),128))])])])):L("",!0),l.value.eduinfo&&l.value.eduinfo.length?(b(),x("div",Cr,[n[20]||(n[20]=r("h5",null,"教育经历",-1)),r("table",null,[n[19]||(n[19]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"学校"),r("th",null,"专业"),r("th",null,"学历"),r("th",null,"培养方式")])],-1)),r("tbody",null,[(b(!0),x(N,null,V(l.value.eduinfo,s=>(b(),x("tr",{key:s.school_name+s.start_time},[r("td",null,c(s.start_time)+" - "+c(s.end_time),1),r("td",null,c(s.school_name),1),r("td",null,c(s.major_name),1),r("td",null,c(s.degree),1),r("td",null,c(s.training_model),1)]))),128))])])])):L("",!0),l.value.projectinfo&&l.value.projectinfo.length?(b(),x("div",Mr,[n[22]||(n[22]=r("h5",null,"项目经历",-1)),r("table",null,[n[21]||(n[21]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"项目名称"),r("th",null,"公司"),r("th",null,"职责"),r("th",null,"描述"),r("th",null,"业绩")])],-1)),r("tbody",null,[(b(!0),x(N,null,V(l.value.projectinfo,s=>(b(),x("tr",{key:s.project_name+s.start_date},[r("td",null,c(s.start_date)+" - "+c(s.end_date),1),r("td",null,c(s.project_name),1),r("td",null,c(s.company_name),1),r("td",null,c(s.project_duty),1),r("td",null,c(s.project_info),1),r("td",null,c(s.project_performance),1)]))),128))])])])):L("",!0)],64))])):(b(),x("div",Sr,"暂无解析结果"))])])])):L("",!0)]),_:1}))}}),Or=ke(Tr,[["__scopeId","data-v-7ddca5b7"]]),Ir=Ee(Or,{visible:!0,get_resume_id:async(e,u)=>e});Ir.mount("#app");
