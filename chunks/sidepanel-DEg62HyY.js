var de=Object.defineProperty;var Ae=(e,i,n)=>i in e?de(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var te=(e,i,n)=>Ae(e,typeof i!="symbol"?i+"":i,n);import{d as fe,r as N,j as ve,a as ne,s as pe,R as be,k as xe,l as he,o as x,m as ye,c as h,f as L,e as r,t as d,w as Q,n as ae,v as X,u as V,F as $,p as q,q as z,T as _e,h as J,b as Z,_ as we,i as ke}from"./_plugin-vue_export-helper-BTBGcpDH.js";const Ee=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Pe=new Map(Ee);class re extends Error{constructor(n){super(re._prepareSuperMessage(n));te(this,"name","NonError")}static _prepareSuperMessage(n){try{return JSON.stringify(n)}catch{return String(n)}}}const Ce=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ee=new WeakSet,Me=e=>{ee.add(e);const i=e.toJSON();return ee.delete(e),i},ce=e=>Pe.get(e)??Error,se=({from:e,seen:i,to:n,forceEnumerable:f,maxDepth:P,depth:C,useToJSON:a,serialize:p})=>{if(!n)if(Array.isArray(e))n=[];else if(!p&&le(e)){const g=ce(e.name);n=new g}else n={};if(i.push(e),C>=P)return n;if(a&&typeof e.toJSON=="function"&&!ee.has(e))return Me(e);const A=g=>se({from:g,seen:[...i],forceEnumerable:f,maxDepth:P,depth:C,useToJSON:a,serialize:p});for(const[g,b]of Object.entries(e)){if(b&&b instanceof Uint8Array&&b.constructor.name==="Buffer"){n[g]="[object Buffer]";continue}if(b!==null&&typeof b=="object"&&typeof b.pipe=="function"){n[g]="[object Stream]";continue}if(typeof b!="function"){if(!b||typeof b!="object"){try{n[g]=b}catch{}continue}if(!i.includes(e[g])){C++,n[g]=A(e[g]);continue}n[g]="[Circular]"}}for(const{property:g,enumerable:b}of Ce)typeof e[g]<"u"&&e[g]!==null&&Object.defineProperty(n,g,{value:le(e[g])?A(e[g]):e[g],enumerable:f?!0:b,configurable:!0,writable:!0});return n};function Se(e,i={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:f=!0}=i;return typeof e=="object"&&e!==null?se({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:f,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Te(e,i={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=i;if(e instanceof Error)return e;if(Ie(e)){const f=ce(e.name);return se({from:e,seen:[],to:new f,maxDepth:n,depth:0,serialize:!1})}return new re(e)}function le(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Ie(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Oe=Object.defineProperty,Re=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,ie=(e,i,n)=>i in e?Oe(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,ue=(e,i)=>{for(var n in i||(i={}))je.call(i,n)&&ie(e,n,i[n]);if(oe)for(var n of oe(i))$e.call(i,n)&&ie(e,n,i[n]);return e},ge=(e,i)=>Re(e,Ne(i)),Le=(e,i,n)=>new Promise((f,P)=>{var C=A=>{try{p(n.next(A))}catch(g){P(g)}},a=A=>{try{p(n.throw(A))}catch(g){P(g)}},p=A=>A.done?f(A.value):Promise.resolve(A.value).then(C,a);p((n=n.apply(e,i)).next())});function Fe(e){let i,n={};function f(){Object.entries(n).length===0&&(i==null||i(),i=void 0)}let P=Math.floor(Math.random()*1e4);function C(){return P++}return{sendMessage(a,p,...A){return Le(this,null,function*(){var g,b,_,T;const O={id:C(),type:a,data:p,timestamp:Date.now()},I=(b=yield(g=e.verifyMessageData)==null?void 0:g.call(e,O))!=null?b:O;(_=e.logger)==null||_.debug(`[messaging] sendMessage {id=${I.id}} ─ᐅ`,I,...A);const R=yield e.sendMessage(I,...A),{res:y,err:w}=R??{err:new Error("No response")};if((T=e.logger)==null||T.debug(`[messaging] sendMessage {id=${I.id}} ᐊ─`,{res:y,err:w}),w!=null)throw Te(w);return y})},onMessage(a,p){var A,g,b;if(i==null&&((A=e.logger)==null||A.debug(`[messaging] "${a}" initialized the message listener for this context`),i=e.addRootListener(_=>{var T,O;if(typeof _.type!="string"||typeof _.timestamp!="number"){if(e.breakError)return;const y=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(_)}`);throw(T=e.logger)==null||T.error(y),y}(O=e==null?void 0:e.logger)==null||O.debug("[messaging] Received message",_);const I=n[_.type];if(I==null)return;const R=I(_);return Promise.resolve(R).then(y=>{var w,F;return(F=(w=e.verifyMessageData)==null?void 0:w.call(e,y))!=null?F:y}).then(y=>{var w;return(w=e==null?void 0:e.logger)==null||w.debug(`[messaging] onMessage {id=${_.id}} ─ᐅ`,{res:y}),{res:y}}).catch(y=>{var w;return(w=e==null?void 0:e.logger)==null||w.debug(`[messaging] onMessage {id=${_.id}} ─ᐅ`,{err:y}),{err:Se(y)}})})),n[a]!=null){const _=Error(`[messaging] In this JS context, only one listener can be setup for ${a}`);throw(g=e.logger)==null||g.error(_),_}return n[a]=p,(b=e.logger)==null||b.log(`[messaging] Added listener for ${a}`),()=>{delete n[a],f()}},removeAllListeners(){Object.keys(n).forEach(a=>{delete n[a]}),f()}}}function Be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H={exports:{}},De=H.exports,me;function Ue(){return me||(me=1,function(e,i){(function(n,f){f(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:De,function(n){var f,P;if(!((P=(f=globalThis.chrome)==null?void 0:f.runtime)!=null&&P.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const C="The message port closed before a response was received.",a=p=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(u,c=void 0){super(c),this.createItem=u}get(u){return this.has(u)||this.set(u,this.createItem(u)),super.get(u)}}const b=o=>o&&typeof o=="object"&&typeof o.then=="function",_=(o,u)=>(...c)=>{p.runtime.lastError?o.reject(new Error(p.runtime.lastError.message)):u.singleCallbackArg||c.length<=1&&u.singleCallbackArg!==!1?o.resolve(c[0]):o.resolve(c)},T=o=>o==1?"argument":"arguments",O=(o,u)=>function(v,...k){if(k.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${T(u.minArgs)} for ${o}(), got ${k.length}`);if(k.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${T(u.maxArgs)} for ${o}(), got ${k.length}`);return new Promise((M,S)=>{if(u.fallbackToNoCallback)try{v[o](...k,_({resolve:M,reject:S},u))}catch(m){console.warn(`${o} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),v[o](...k),u.fallbackToNoCallback=!1,u.noCallback=!0,M()}else u.noCallback?(v[o](...k),M()):v[o](...k,_({resolve:M,reject:S},u))})},I=(o,u,c)=>new Proxy(u,{apply(v,k,M){return c.call(k,o,...M)}});let R=Function.call.bind(Object.prototype.hasOwnProperty);const y=(o,u={},c={})=>{let v=Object.create(null),k={has(S,m){return m in o||m in v},get(S,m,l){if(m in v)return v[m];if(!(m in o))return;let s=o[m];if(typeof s=="function")if(typeof u[m]=="function")s=I(o,o[m],u[m]);else if(R(c,m)){let t=O(m,c[m]);s=I(o,o[m],t)}else s=s.bind(o);else if(typeof s=="object"&&s!==null&&(R(u,m)||R(c,m)))s=y(s,u[m],c[m]);else if(R(c,"*"))s=y(s,u[m],c["*"]);else return Object.defineProperty(v,m,{configurable:!0,enumerable:!0,get(){return o[m]},set(t){o[m]=t}}),s;return v[m]=s,s},set(S,m,l,s){return m in v?v[m]=l:o[m]=l,!0},defineProperty(S,m,l){return Reflect.defineProperty(v,m,l)},deleteProperty(S,m){return Reflect.deleteProperty(v,m)}},M=Object.create(o);return new Proxy(M,k)},w=o=>({addListener(u,c,...v){u.addListener(o.get(c),...v)},hasListener(u,c){return u.hasListener(o.get(c))},removeListener(u,c){u.removeListener(o.get(c))}}),F=new g(o=>typeof o!="function"?o:function(c){const v=y(c,{},{getContent:{minArgs:0,maxArgs:0}});o(v)}),B=new g(o=>typeof o!="function"?o:function(c,v,k){let M=!1,S,m=new Promise(E=>{S=function(j){M=!0,E(j)}}),l;try{l=o(c,v,S)}catch(E){l=Promise.reject(E)}const s=l!==!0&&b(l);if(l!==!0&&!s&&!M)return!1;const t=E=>{E.then(j=>{k(j)},j=>{let Y;j&&(j instanceof Error||typeof j.message=="string")?Y=j.message:Y="An unexpected error occurred",k({__mozWebExtensionPolyfillReject__:!0,message:Y})}).catch(j=>{console.error("Failed to send onMessage rejected reply",j)})};return t(s?l:m),!0}),D=({reject:o,resolve:u},c)=>{p.runtime.lastError?p.runtime.lastError.message===C?u():o(new Error(p.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?o(new Error(c.message)):u(c)},W=(o,u,c,...v)=>{if(v.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${T(u.minArgs)} for ${o}(), got ${v.length}`);if(v.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${T(u.maxArgs)} for ${o}(), got ${v.length}`);return new Promise((k,M)=>{const S=D.bind(null,{resolve:k,reject:M});v.push(S),c.sendMessage(...v)})},K={devtools:{network:{onRequestFinished:w(F)}},runtime:{onMessage:w(B),onMessageExternal:w(B),sendMessage:W.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:W.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},U={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":U},services:{"*":U},websites:{"*":U}},y(p,K,A)};n.exports=a(chrome)}else n.exports=globalThis.browser})}(H)),H.exports}var qe=Ue();const G=Be(qe);function We(e){return Fe(ge(ue({},e),{sendMessage(i,n){if(n==null)return G.runtime.sendMessage(i);const f=typeof n=="number"?{tabId:n}:n;return G.tabs.sendMessage(f.tabId,i,f.frameId!=null?{frameId:f.frameId}:void 0)},addRootListener(i){const n=(f,P)=>i(typeof f=="object"?ge(ue({},f),{sender:P}):f);return G.runtime.onMessage.addListener(n),()=>G.runtime.onMessage.removeListener(n)}}))}const{onMessage:Ve}=We(),ze={key:0,class:"floating-panel"},Je={class:"panel-header"},Ze={key:0,style:{"font-size":"12px",color:"#666",margin:"0"}},Ge={class:"panel-content"},He={class:"input-section"},Ke={class:"parse-button-container"},Ye=["disabled"],Qe={class:"input-group contact-group"},Xe={class:"contact-inputs"},er=["disabled"],rr=["disabled"],sr=["disabled"],tr={class:"input-group feedback-group"},nr={class:"input-wrapper"},ar=["disabled"],lr=["disabled"],or={class:"feedback-prompts"},ir={key:0,class:"contact-info-section"},ur={class:"info-card"},gr={class:"info-grid"},mr={class:"info-item"},cr={class:"info-value"},dr={class:"info-item"},Ar={class:"info-value"},fr={class:"info-item"},vr={class:"info-value"},pr={class:"result-section"},br={class:"panel-header2"},xr={key:0,class:"warning-box"},hr={key:0,class:"result-content"},yr={key:0,class:"info-card"},_r={class:"info-grid"},wr={class:"info-label"},kr={class:"info-value"},Er={key:1,class:"data-table"},Pr={key:2,class:"data-table"},Cr={key:3,class:"data-table"},Mr={key:1,class:"empty-result"},Sr=fe({__name:"FloatingPanel",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:i}){const n=i,f=N(""),P=N(!1),C=N(!1),a=N(""),p=N(""),A=N(""),g=N(""),b=N(!1),_=N(!1),T=N(""),O=N(""),I=l=>/^[+]?[\s-\d]+$/.test(l),R=l=>/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(l),y=ve(()=>!(!f.value||!A.value&&!g.value||A.value&&!I(A.value)||g.value&&!R(g.value))),w=N(null);ne(async()=>{const l=await pe.getItem("local:username");w.value=l||null}),Ve("updateResumeId",l=>(f.value=l.data.resumeId,l.data.resumeId));const F=async()=>{if(y.value)try{b.value=!0,await J.updateMobileEmail(T.value,A.value,g.value),alert("更新成功"),typeof a.value!="string"&&a.value.userinfo&&a.value.userinfo.length>0&&(a.value.userinfo[0].email=g.value,a.value.userinfo[0].mobile=A.value),g.value="",A.value=""}catch(l){alert(`更新失败: ${l.message}`)}finally{b.value=!1}};let B;const D=async()=>{const[l]=await Z.tabs.query({active:!0,currentWindow:!0});if(!(l!=null&&l.id))throw new Error("无法获取当前活动标签页");return new Promise((s,t)=>{Z.tabs.sendMessage(l.id,{action:"getPageData"},E=>{if(Z.runtime.lastError){t(new Error(Z.runtime.lastError.message));return}if(!E){t(new Error("未收到页面数据"));return}s(E)})})},W=async()=>{var l;try{const{html:s,url:t}=await D(),E=await J.getSourceId(t,s);return((l=E==null?void 0:E.data)==null?void 0:l.source_id)??null}catch(s){return console.error("Failed to fetch current source_id:",s),null}},K=async()=>{if(!O.value)return!1;const l=await W();return console.log("currentSourceID: ",l),console.log("lastSourceID: ",O.value),l===O.value},U=async()=>{if(f.value)try{P.value=!0,A.value="",g.value="",p.value="";const{html:l,url:s}=await D();if(!l||!s)throw new Error("页面数据不完整");const t=await J.parseResume(f.value,s,l);console.log("Full result from API:",t),a.value=t.data,console.log("Raw has_contact:",t.has_contact,typeof t.has_contact),_.value=!!t.has_contact,console.log("Raw has_contact:",t.has_contact,typeof t.has_contact);try{console.log("CONTACT: ",t.has_contact),console.log("IDK LMAO: ",a)}catch(E){console.error("Failed to log contact:",E)}if(typeof a.value!="string"&&a.value.userinfo&&a.value.userinfo.length>0){const E=a.value.userinfo[0];T.value=E.source_id||"",O.value=E.source_id||""}}catch(l){const s=l instanceof Error?l.message:"未知错误";console.error("解析失败:",s),a.value=`解析出错: ${s}`}finally{P.value=!1,console.log("Parse clicked",{isParseLoading:P.value})}},o=l=>async()=>{if(!await K()){alert("⚠️ 请先解析当前简历后再更新联系方式");return}await l()},u=async()=>{if(!(!p.value||p.value.length>255))try{C.value=!0;const{html:l,url:s}=await D(),t=T.value;await J.submitFeedback(t,p.value,l),p.value="",alert("反馈提交成功")}catch(l){alert(`提交失败: ${l.message}`)}finally{C.value=!1}},c=l=>{p.value=l};ne(async()=>{if(B=be.getInstance(),f.value="test-id",!B.checkSupportedDomain(window.location.hostname)){n("update:visible",!1);return}B.subscribe(l=>{f.value=l})}),xe(()=>{});const v=l=>({9:"小学",8:"初中",3:"高中",4:"中技/中专/技校/职高",5:"大专",1:"本科",2:"硕士/硕士研究生",6:"MBA",7:"博士/博士研究生",10:"保密",120:"EMBA",130:"MPA"})[l]||"未知",k={1:"在职-不找工作",2:"离职-找工作",3:"在职-看机会",4:"在校-找工作",5:"在校-不找工作",6:"观望有好机会会考虑",7:"积极找工作",[-1]:"未知"},M=l=>k[l]||"未知",S=o(F),m=u;return(l,s)=>(x(),he(_e,{name:"fade"},{default:ye(()=>[l.visible?(x(),h("div",ze,[r("div",Je,[s[8]||(s[8]=r("h3",null,"功能面板",-1)),w.value?(x(),h("p",Ze,"👤 "+d(w.value),1)):L("",!0)]),r("div",Ge,[r("div",He,[r("div",Ke,[r("button",{class:"full-parse-button",onClick:U,disabled:P.value},d(P.value?"解析中...":"解析"),9,Ye)]),r("div",Qe,[s[9]||(s[9]=r("label",null,"联系方式：",-1)),r("div",Xe,[Q(r("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>A.value=t),placeholder:"手机号",class:ae({invalid:A.value&&!I(A.value)}),disabled:b.value},null,10,er),[[X,A.value]]),Q(r("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>g.value=t),placeholder:"邮箱地址",class:ae({invalid:g.value&&!R(g.value)}),disabled:b.value},null,10,rr),[[X,g.value]])]),r("button",{onClick:s[2]||(s[2]=(...t)=>V(S)&&V(S)(...t)),disabled:!y.value||b.value,class:"update-button"},d(b.value?"更新中...":"更新"),9,sr)]),r("div",tr,[s[10]||(s[10]=r("label",null,"反馈意见：",-1)),r("div",nr,[Q(r("textarea",{"onUpdate:modelValue":s[3]||(s[3]=t=>p.value=t),placeholder:"请输入反馈意见",disabled:C.value,class:"feedback-textarea"},null,8,ar),[[X,p.value]]),r("button",{onClick:s[4]||(s[4]=(...t)=>V(m)&&V(m)(...t)),disabled:!p.value||C.value},d(C.value?"提交中...":"反馈"),9,lr)]),r("div",or,[r("button",{onClick:s[5]||(s[5]=t=>c("无法解析当前简历"))},"无解析结果"),r("button",{onClick:s[6]||(s[6]=t=>c("解析基本信息错误"))},"用户信息错误"),r("button",{onClick:s[7]||(s[7]=t=>c("解析工作经历错误"))},"工作经历错误")])])]),a.value&&typeof a.value!="string"&&a.value.userinfo&&a.value.userinfo.length?(x(),h("div",ir,[s[14]||(s[14]=r("h3",{class:"panel-title"},"联系方式:",-1)),r("div",ur,[r("div",gr,[r("div",mr,[s[11]||(s[11]=r("span",{class:"info-label"},"👤:",-1)),r("span",cr,d(a.value.userinfo[0].name||"未解析?"),1)]),r("div",dr,[s[12]||(s[12]=r("span",{class:"info-label"},"📞:",-1)),r("span",Ar,d(a.value.userinfo[0].mobile||""),1)]),r("div",fr,[s[13]||(s[13]=r("span",{class:"info-label"},"📧:",-1)),r("span",vr,d(a.value.userinfo[0].email||""),1)])])])])):L("",!0),r("div",pr,[r("div",br,[_.value?(x(),h("div",xr," ⚠️ 系统中有人已购买该简历! ")):L("",!0),s[15]||(s[15]=r("h3",{class:"panel-title"},"结果面板",-1))]),a.value?(x(),h("div",hr,[typeof a.value=="string"?(x(),h($,{key:0},[q(d(a.value),1)],64)):(x(),h($,{key:1},[a.value.userinfo&&a.value.userinfo.length?(x(),h("div",yr,[s[16]||(s[16]=r("h5",null,"基本信息",-1)),r("div",_r,[(x(),h($,null,z(["source_id","name","gender","first_education_level","years_of_work","area","status","age","last_updated_time","birthyear","web_site"],(t,E)=>r("div",{key:E,class:"info-item"},[r("span",wr,d(t)+":",1),r("span",kr,[t==="gender"?(x(),h($,{key:0},[q(d(a.value.userinfo[0][t]===0?"男":a.value.userinfo[0][t]===1?"女":"未知"),1)],64)):t==="first_education_level"?(x(),h($,{key:1},[q(d(v(a.value.userinfo[0][t]??-1)),1)],64)):t==="status"?(x(),h($,{key:2},[q(d(M(a.value.userinfo[0][t]??-1)),1)],64)):(x(),h($,{key:3},[q(d(a.value.userinfo[0][t]||""),1)],64))])])),64))])])):L("",!0),a.value.workinfo&&a.value.workinfo.length?(x(),h("div",Er,[s[18]||(s[18]=r("h5",null,"工作经历",-1)),r("table",null,[s[17]||(s[17]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"公司"),r("th",null,"职位"),r("th",null,"部门"),r("th",null,"性质"),r("th",null,"描述")])],-1)),r("tbody",null,[(x(!0),h($,null,z(a.value.workinfo,t=>(x(),h("tr",{key:t.company_name+t.start_date},[r("td",null,d(t.start_date)+" - "+d(t.end_date),1),r("td",null,d(t.company_name),1),r("td",null,d(t.job_title),1),r("td",null,d(t.department),1),r("td",null,d(t.job_property),1),r("td",null,d(t.jobduty),1)]))),128))])])])):L("",!0),a.value.eduinfo&&a.value.eduinfo.length?(x(),h("div",Pr,[s[20]||(s[20]=r("h5",null,"教育经历",-1)),r("table",null,[s[19]||(s[19]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"学校"),r("th",null,"专业"),r("th",null,"学历"),r("th",null,"培养方式")])],-1)),r("tbody",null,[(x(!0),h($,null,z(a.value.eduinfo,t=>(x(),h("tr",{key:t.school_name+t.start_time},[r("td",null,d(t.start_time)+" - "+d(t.end_time),1),r("td",null,d(t.school_name),1),r("td",null,d(t.major_name),1),r("td",null,d(t.degree),1),r("td",null,d(t.training_model),1)]))),128))])])])):L("",!0),a.value.projectinfo&&a.value.projectinfo.length?(x(),h("div",Cr,[s[22]||(s[22]=r("h5",null,"项目经历",-1)),r("table",null,[s[21]||(s[21]=r("thead",null,[r("tr",null,[r("th",null,"时间"),r("th",null,"项目名称"),r("th",null,"公司"),r("th",null,"职责"),r("th",null,"描述"),r("th",null,"业绩")])],-1)),r("tbody",null,[(x(!0),h($,null,z(a.value.projectinfo,t=>(x(),h("tr",{key:t.project_name+t.start_date},[r("td",null,d(t.start_date)+" - "+d(t.end_date),1),r("td",null,d(t.project_name),1),r("td",null,d(t.company_name),1),r("td",null,d(t.project_duty),1),r("td",null,d(t.project_info),1),r("td",null,d(t.project_performance),1)]))),128))])])])):L("",!0)],64))])):(x(),h("div",Mr,"暂无解析结果"))])])])):L("",!0)]),_:1}))}}),Tr=we(Sr,[["__scopeId","data-v-aac0fa74"]]),Ir=ke(Tr,{visible:!0,get_resume_id:async(e,i)=>e});Ir.mount("#app");
