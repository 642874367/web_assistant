var content=function(){"use strict";var We=Object.defineProperty;var Ve=(C,T,k)=>T in C?We(C,T,{enumerable:!0,configurable:!0,writable:!0,value:k}):C[T]=k;var w=(C,T,k)=>Ve(C,typeof T!="symbol"?T+"":T,k);var le,ge;const C=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(s=>[s.name,s]),T=new Map(C);class k extends Error{constructor(e){super(k._prepareSuperMessage(e));w(this,"name","NonError")}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const ue=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],V=new WeakSet,de=s=>{V.add(s);const r=s.toJSON();return V.delete(s),r},X=s=>T.get(s)??Error,z=({from:s,seen:r,to:e,forceEnumerable:t,maxDepth:n,depth:a,useToJSON:g,serialize:d})=>{if(!e)if(Array.isArray(s))e=[];else if(!d&&ee(s)){const m=X(s.name);e=new m}else e={};if(r.push(s),a>=n)return e;if(g&&typeof s.toJSON=="function"&&!V.has(s))return de(s);const A=m=>z({from:m,seen:[...r],forceEnumerable:t,maxDepth:n,depth:a,useToJSON:g,serialize:d});for(const[m,f]of Object.entries(s)){if(f&&f instanceof Uint8Array&&f.constructor.name==="Buffer"){e[m]="[object Buffer]";continue}if(f!==null&&typeof f=="object"&&typeof f.pipe=="function"){e[m]="[object Stream]";continue}if(typeof f!="function"){if(!f||typeof f!="object"){try{e[m]=f}catch{}continue}if(!r.includes(s[m])){a++,e[m]=A(s[m]);continue}e[m]="[Circular]"}}for(const{property:m,enumerable:f}of ue)typeof s[m]<"u"&&s[m]!==null&&Object.defineProperty(e,m,{value:ee(s[m])?A(s[m]):s[m],enumerable:t?!0:f,configurable:!0,writable:!0});return e};function Ae(s,r={}){const{maxDepth:e=Number.POSITIVE_INFINITY,useToJSON:t=!0}=r;return typeof s=="object"&&s!==null?z({from:s,seen:[],forceEnumerable:!0,maxDepth:e,depth:0,useToJSON:t,serialize:!0}):typeof s=="function"?`[Function: ${s.name||"anonymous"}]`:s}function fe(s,r={}){const{maxDepth:e=Number.POSITIVE_INFINITY}=r;if(s instanceof Error)return s;if(he(s)){const t=X(s.name);return z({from:s,seen:[],to:new t,maxDepth:e,depth:0,serialize:!1})}return new k(s)}function ee(s){return!!s&&typeof s=="object"&&"name"in s&&"message"in s&&"stack"in s}function he(s){return!!s&&typeof s=="object"&&"message"in s&&!Array.isArray(s)}var pe=Object.defineProperty,be=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,se=(s,r,e)=>r in s?pe(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e,te=(s,r)=>{for(var e in r||(r={}))ye.call(r,e)&&se(s,e,r[e]);if(re)for(var e of re(r))we.call(r,e)&&se(s,e,r[e]);return s},ne=(s,r)=>be(s,xe(r)),ve=(s,r,e)=>new Promise((t,n)=>{var a=A=>{try{d(e.next(A))}catch(m){n(m)}},g=A=>{try{d(e.throw(A))}catch(m){n(m)}},d=A=>A.done?t(A.value):Promise.resolve(A.value).then(a,g);d((e=e.apply(s,r)).next())});function Se(s){let r,e={};function t(){Object.entries(e).length===0&&(r==null||r(),r=void 0)}let n=Math.floor(Math.random()*1e4);function a(){return n++}return{sendMessage(g,d,...A){return ve(this,null,function*(){var m,f,b,_;const O={id:a(),type:g,data:d,timestamp:Date.now()},I=(f=yield(m=s.verifyMessageData)==null?void 0:m.call(s,O))!=null?f:O;(b=s.logger)==null||b.debug(`[messaging] sendMessage {id=${I.id}} ─ᐅ`,I,...A);const M=yield s.sendMessage(I,...A),{res:h,err:y}=M??{err:new Error("No response")};if((_=s.logger)==null||_.debug(`[messaging] sendMessage {id=${I.id}} ᐊ─`,{res:h,err:y}),y!=null)throw fe(y);return h})},onMessage(g,d){var A,m,f;if(r==null&&((A=s.logger)==null||A.debug(`[messaging] "${g}" initialized the message listener for this context`),r=s.addRootListener(b=>{var _,O;if(typeof b.type!="string"||typeof b.timestamp!="number"){if(s.breakError)return;const h=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(b)}`);throw(_=s.logger)==null||_.error(h),h}(O=s==null?void 0:s.logger)==null||O.debug("[messaging] Received message",b);const I=e[b.type];if(I==null)return;const M=I(b);return Promise.resolve(M).then(h=>{var y,W;return(W=(y=s.verifyMessageData)==null?void 0:y.call(s,h))!=null?W:h}).then(h=>{var y;return(y=s==null?void 0:s.logger)==null||y.debug(`[messaging] onMessage {id=${b.id}} ─ᐅ`,{res:h}),{res:h}}).catch(h=>{var y;return(y=s==null?void 0:s.logger)==null||y.debug(`[messaging] onMessage {id=${b.id}} ─ᐅ`,{err:h}),{err:Ae(h)}})})),e[g]!=null){const b=Error(`[messaging] In this JS context, only one listener can be setup for ${g}`);throw(m=s.logger)==null||m.error(b),b}return e[g]=d,(f=s.logger)==null||f.log(`[messaging] Added listener for ${g}`),()=>{delete e[g],t()}},removeAllListeners(){Object.keys(e).forEach(g=>{delete e[g]}),t()}}}function Ee(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $={exports:{}},_e=$.exports,ie;function Ie(){return ie||(ie=1,function(s,r){(function(e,t){t(s)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:_e,function(e){var t,n;if(!((n=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&n.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const a="The message port closed before a response was received.",g=d=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class m extends WeakMap{constructor(o,c=void 0){super(c),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const f=i=>i&&typeof i=="object"&&typeof i.then=="function",b=(i,o)=>(...c)=>{d.runtime.lastError?i.reject(new Error(d.runtime.lastError.message)):o.singleCallbackArg||c.length<=1&&o.singleCallbackArg!==!1?i.resolve(c[0]):i.resolve(c)},_=i=>i==1?"argument":"arguments",O=(i,o)=>function(u,...x){if(x.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${_(o.minArgs)} for ${i}(), got ${x.length}`);if(x.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${_(o.maxArgs)} for ${i}(), got ${x.length}`);return new Promise((v,S)=>{if(o.fallbackToNoCallback)try{u[i](...x,b({resolve:v,reject:S},o))}catch(l){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,l),u[i](...x),o.fallbackToNoCallback=!1,o.noCallback=!0,v()}else o.noCallback?(u[i](...x),v()):u[i](...x,b({resolve:v,reject:S},o))})},I=(i,o,c)=>new Proxy(o,{apply(u,x,v){return c.call(x,i,...v)}});let M=Function.call.bind(Object.prototype.hasOwnProperty);const h=(i,o={},c={})=>{let u=Object.create(null),x={has(S,l){return l in i||l in u},get(S,l,E){if(l in u)return u[l];if(!(l in i))return;let p=i[l];if(typeof p=="function")if(typeof o[l]=="function")p=I(i,i[l],o[l]);else if(M(c,l)){let L=O(l,c[l]);p=I(i,i[l],L)}else p=p.bind(i);else if(typeof p=="object"&&p!==null&&(M(o,l)||M(c,l)))p=h(p,o[l],c[l]);else if(M(c,"*"))p=h(p,o[l],c["*"]);else return Object.defineProperty(u,l,{configurable:!0,enumerable:!0,get(){return i[l]},set(L){i[l]=L}}),p;return u[l]=p,p},set(S,l,E,p){return l in u?u[l]=E:i[l]=E,!0},defineProperty(S,l,E){return Reflect.defineProperty(u,l,E)},deleteProperty(S,l){return Reflect.deleteProperty(u,l)}},v=Object.create(i);return new Proxy(v,x)},y=i=>({addListener(o,c,...u){o.addListener(i.get(c),...u)},hasListener(o,c){return o.hasListener(i.get(c))},removeListener(o,c){o.removeListener(i.get(c))}}),W=new m(i=>typeof i!="function"?i:function(c){const u=h(c,{},{getContent:{minArgs:0,maxArgs:0}});i(u)}),ce=new m(i=>typeof i!="function"?i:function(c,u,x){let v=!1,S,l=new Promise(U=>{S=function(P){v=!0,U(P)}}),E;try{E=i(c,u,S)}catch(U){E=Promise.reject(U)}const p=E!==!0&&f(E);if(E!==!0&&!p&&!v)return!1;const L=U=>{U.then(P=>{x(P)},P=>{let Q;P&&(P instanceof Error||typeof P.message=="string")?Q=P.message:Q="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:Q})}).catch(P=>{console.error("Failed to send onMessage rejected reply",P)})};return L(p?E:l),!0}),qe=({reject:i,resolve:o},c)=>{d.runtime.lastError?d.runtime.lastError.message===a?o():i(new Error(d.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?i(new Error(c.message)):o(c)},me=(i,o,c,...u)=>{if(u.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${_(o.minArgs)} for ${i}(), got ${u.length}`);if(u.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${_(o.maxArgs)} for ${i}(), got ${u.length}`);return new Promise((x,v)=>{const S=qe.bind(null,{resolve:x,reject:v});u.push(S),c.sendMessage(...u)})},Be={devtools:{network:{onRequestFinished:y(W)}},runtime:{onMessage:y(ce),onMessageExternal:y(ce),sendMessage:me.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:me.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},h(d,Be,A)};e.exports=g(chrome)}else e.exports=globalThis.browser})}($)),$.exports}var Pe=Ie();const F=Ee(Pe);function Te(s){return Se(ne(te({},s),{sendMessage(r,e){if(e==null)return F.runtime.sendMessage(r);const t=typeof e=="number"?{tabId:e}:e;return F.tabs.sendMessage(t.tabId,r,t.frameId!=null?{frameId:t.frameId}:void 0)},addRootListener(r){const e=(t,n)=>r(typeof t=="object"?ne(te({},t),{sender:n}):t);return F.runtime.onMessage.addListener(e),()=>F.runtime.onMessage.removeListener(e)}}))}const{sendMessage:oe}=Te(),R=((ge=(le=globalThis.browser)==null?void 0:le.runtime)==null?void 0:ge.id)==null?globalThis.chrome:globalThis.browser;function ze(s){return s}class Me{constructor(){w(this,"observers",[])}subscribe(r){this.observers.push(r)}unsubscribe(r){const e=this.observers.indexOf(r);e!==-1&&this.observers.splice(e,1)}notify(r){this.observers.forEach(e=>e(r))}}class ke{parseResumeId(r,e){return Promise.resolve(r)}shouldUpdate(r){return!1}}class Ce{parseResumeId(r,e){const t=[/resumeNo=([^_]+)/,/resumeNumber=([^_]+?)&/,/resumeNumber=([^_]+?)#/,/resumeNumber=([^_]+)/];for(const n of t){const a=r.match(n);if(a)return Promise.resolve(a[1])}return Promise.resolve("非详情页")}shouldUpdate(r){const e=document.querySelector(".new-shortcut-resume__inner");return e?r.target===e||e.contains(r.target):!1}}class Ne{parseResumeId(r,e){const t=[/resumeId=([^&]+)/,/hidSeqID=([^&]+)/,/(?:hidUserID|hiduserid|hiduserId|&userId)=([^&]+)/];for(const n of t){const a=r.match(n);if(a)return Promise.resolve(a[1])}return Promise.resolve("非详情页")}shouldUpdate(r){return!1}}class D{parseResumeId(r,e){const t=[/resIdEncode=([^&]+)/,/res_id_encode=([^&]+)/];for(const a of t){const g=r.match(a);if(g)return Promise.resolve(g[1])}const n=document.querySelector('span[class*="resume-detail-btn-text"]');if(n){const a=n.textContent,g=a==null?void 0:a.match(/简历编号\s*:\s*([\w]+)\s*/);if(g)return Promise.resolve(g[1])}return Promise.resolve("非详情页")}shouldUpdate(r){if(r.removedNodes.length>0){for(const t of r.removedNodes)if(t instanceof Element&&t.classList.contains("ant-lpt-modal"))return!0}if(r.target instanceof Element&&r.target.closest('svg[data-icon="close"]'))return!0;const e=document.querySelector(".ant-lpt-modal");return e?r.target===e||e.contains(r.target):!1}}class Oe{parseResumeId(r,e){const t=["/in/(.+)?/"];for(const n of t){const a=r.match(n);if(a)return Promise.resolve(a[1])}return Promise.resolve("非详情页")}shouldUpdate(r){return!1}}class Re{async parseResumeId(r,e){const a=new DOMParser().parseFromString(e,"text/html").querySelector('[id^="groups_discover_list_pc_"][id$="_0"]');if(a){const g=a.id.match(/groups_discover_list_pc_(\d+)_0/);if(g)return g[1]}return"非详情页"}shouldUpdate(r){return!1}}class ae{static getStrategies(){return this.strategies}}w(ae,"strategies",new Map([["google.com",new ke],["zhaopin.com",new Ce],["51job.com",new Ne],["lpt.liepin.com",new D],["lpt.liepin.cn",new D],["h.liepin.cn",new D],["h.liepin.com",new D],["linkedin.com",new Oe],["maimai.cn",new Re]]));const N=class N extends Me{constructor(){super();w(this,"strategies");w(this,"currentStrategy",null);w(this,"observer",null);w(this,"lastUrl","");this.strategies=ae.getStrategies(),this.setupUrlCheck()}checkSupportedDomain(e){for(const[t]of this.strategies)if(e.includes(t))return!0;return!1}static getInstance(){return N.instance||(N.instance=new N),N.instance}setupUrlCheck(){setInterval(()=>this.checkUrlChange(),500)}async checkUrlChange(){const e=window.location.href;e!==this.lastUrl&&(this.lastUrl=e,await this.updateStrategy(),await this.parseResumeId())}async updateStrategy(){const e=window.location.hostname;for(const[t,n]of this.strategies)if(e.includes(t)){this.currentStrategy=n,this.setupObserver();return}this.currentStrategy=null,this.disconnectObserver()}setupObserver(){this.currentStrategy&&(this.disconnectObserver(),this.observer=new MutationObserver(async e=>{e.some(n=>{var a;return(a=this.currentStrategy)==null?void 0:a.shouldUpdate(n)})&&await this.parseResumeId()}),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}))}disconnectObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}async parseResumeId(){if(!this.currentStrategy)return this.notify(""),"";try{const e=await this.currentStrategy.parseResumeId(window.location.href,document.body.innerHTML);return this.notify(e),e}catch(e){return console.error("解析简历ID失败:",e),""}}destroy(){this.disconnectObserver()}};w(N,"instance");let H=N;const Le={matches:["<all_urls>"],main(){const s=H.getInstance();if(!s.checkSupportedDomain(window.location.hostname)){setTimeout(()=>{oe("updateResumeId",{resumeId:""})},100);return}s.subscribe(r=>{R.runtime.lastError||setTimeout(()=>{oe("updateResumeId",{resumeId:r})},100)}),R.runtime.onMessage.addListener((r,e,t)=>{if(r.action==="getPageData"){const n=document.documentElement.outerHTML;t({html:n,url:window.location.href})}return!0})}};function K(s,...r){}const je={debug:(...s)=>K(console.debug,...s),log:(...s)=>K(console.log,...s),warn:(...s)=>K(console.warn,...s),error:(...s)=>K(console.error,...s)},B=class B extends Event{constructor(r,e){super(B.EVENT_NAME,{}),this.newUrl=r,this.oldUrl=e}};w(B,"EVENT_NAME",G("wxt:locationchange"));let J=B;function G(s){var r;return`${(r=R==null?void 0:R.runtime)==null?void 0:r.id}:content:${s}`}function Ue(s){let r,e;return{run(){r==null&&(e=new URL(location.href),r=s.setInterval(()=>{let t=new URL(location.href);t.href!==e.href&&(window.dispatchEvent(new J(t,e)),e=t)},1e3))}}}const j=class j{constructor(r,e){w(this,"isTopFrame",window.self===window.top);w(this,"abortController");w(this,"locationWatcher",Ue(this));w(this,"receivedMessageIds",new Set);this.contentScriptName=r,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(r){return this.abortController.abort(r)}get isInvalid(){return R.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(r){return this.signal.addEventListener("abort",r),()=>this.signal.removeEventListener("abort",r)}block(){return new Promise(()=>{})}setInterval(r,e){const t=setInterval(()=>{this.isValid&&r()},e);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(r,e){const t=setTimeout(()=>{this.isValid&&r()},e);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(r){const e=requestAnimationFrame((...t)=>{this.isValid&&r(...t)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(r,e){const t=requestIdleCallback((...n)=>{this.signal.aborted||r(...n)},e);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(r,e,t,n){var a;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(a=r.addEventListener)==null||a.call(r,e.startsWith("wxt:")?G(e):e,t,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),je.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:j.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(r){var a,g,d;const e=((a=r.data)==null?void 0:a.type)===j.SCRIPT_STARTED_MESSAGE_TYPE,t=((g=r.data)==null?void 0:g.contentScriptName)===this.contentScriptName,n=!this.receivedMessageIds.has((d=r.data)==null?void 0:d.messageId);return e&&t&&n}listenForNewerScripts(r){let e=!0;const t=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const a=e;if(e=!1,a&&(r!=null&&r.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))}};w(j,"SCRIPT_STARTED_MESSAGE_TYPE",G("wxt:content-script-started"));let Y=j;const $e=Symbol("null");let Fe=0;class De extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[r]=arguments;if(r!=null){if(typeof r[Symbol.iterator]!="function")throw new TypeError(typeof r+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[e,t]of r)this.set(e,t)}}_getPublicKeys(r,e=!1){if(!Array.isArray(r))throw new TypeError("The keys parameter must be an array");const t=this._getPrivateKey(r,e);let n;return t&&this._publicKeys.has(t)?n=this._publicKeys.get(t):e&&(n=[...r],this._publicKeys.set(t,n)),{privateKey:t,publicKey:n}}_getPrivateKey(r,e=!1){const t=[];for(let n of r){n===null&&(n=$e);const a=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!a)t.push(n);else if(this[a].has(n))t.push(this[a].get(n));else if(e){const g=`@@mkm-ref-${Fe++}@@`;this[a].set(n,g),t.push(g)}else return!1}return JSON.stringify(t)}set(r,e){const{publicKey:t}=this._getPublicKeys(r,!0);return super.set(t,e)}get(r){const{publicKey:e}=this._getPublicKeys(r);return super.get(e)}has(r){const{publicKey:e}=this._getPublicKeys(r);return super.has(e)}delete(r){const{publicKey:e,privateKey:t}=this._getPublicKeys(r);return!!(e&&super.delete(e)&&this._publicKeys.delete(t))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new De;function He(){}function q(s,...r){}const Ke={debug:(...s)=>q(console.debug,...s),log:(...s)=>q(console.log,...s),warn:(...s)=>q(console.warn,...s),error:(...s)=>q(console.error,...s)};return(async()=>{try{const{main:s,...r}=Le,e=new Y("content",r);return await s(e)}catch(s){throw Ke.error('The content script "content" crashed on startup!',s),s}})()}();
content;
